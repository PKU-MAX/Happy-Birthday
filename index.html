<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>æ”¶é›†23å²çš„å¿«ä¹ç¢ç‰‡</title>
    <link href="https://fonts.googleapis.com/css2?family=ZCOOL+KuaiLe&display=swap" rel="stylesheet">
    <style>
        /* --- å…¨å±€ä¸é‡ç½® --- */
        * { box-sizing: border-box; }
        body {
            margin: 0; padding: 0; overflow: hidden;
            font-family: 'ZCOOL KuaiLe', cursive, sans-serif;
            background-color: #333;
            user-select: none; -webkit-user-select: none;
        }

        /* ==================== 
           UI å±‚æ ·å¼ 
           ==================== */
        #gameWrapper {
            position: absolute; top: 0; left: 0; width: 100vw; height: 100vh;
            background: linear-gradient(180deg, #84fab0 0%, #8fd3f4 100%); /* æ¸…æ–°æµ·åŸŸ */
            z-index: 100;
            transition: transform 1s ease-in-out, opacity 1s;
        }

        canvas#gameCanvas {
            display: block; width: 100%; height: 100%;
        }

        /* é¡¶éƒ¨è¿›åº¦æ¡åŒºåŸŸ */
        .hud {
            position: absolute; top: 20px; left: 0; width: 100%;
            display: flex; flex-direction: column; align-items: center;
            pointer-events: none;
            z-index: 20;
        }

        .count-badge {
            background: rgba(255, 255, 255, 0.9);
            padding: 10px 25px; border-radius: 50px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            display: flex; align-items: center; gap: 10px;
            border: 3px solid #ff9ff3;
        }

        .hat-icon { font-size: 1.5rem; }
        .score-text { font-size: 1.8rem; color: #ff6b6b; font-weight: bold; }
        .target-text { font-size: 1.2rem; color: #aaa; margin-left: 5px; }

        .progress-bar {
            width: 80%; max-width: 300px; height: 10px;
            background: rgba(255,255,255,0.5);
            border-radius: 10px; margin-top: 10px;
            overflow: hidden;
        }
        .progress-fill {
            width: 0%; height: 100%;
            background: linear-gradient(90deg, #ff9ff3, #feca57);
            transition: width 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
        }

        /* äº¤äº’æç¤ºå±‚ */
        .ui-overlay {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            display: flex; justify-content: center; align-items: center;
            pointer-events: none; /* è®©ç‚¹å‡»ç©¿é€ */
        }

        /* å¼€å§‹æŒ‰é’®æ¡† */
        .start-card {
            background: rgba(255, 255, 255, 0.95);
            padding: 30px; border-radius: 30px;
            text-align: center; pointer-events: auto;
            box-shadow: 0 15px 35px rgba(50,50,93,0.2);
            border: 5px solid #fff;
            animation: floatUI 3s ease-in-out infinite;
            max-width: 85%;
        }

        h2 { margin: 0 0 10px; color: #333; font-size: 1.8rem; }
        p { color: #666; font-size: 1.1rem; line-height: 1.6; margin-bottom: 20px; }
        
        button.btn-start {
            background: linear-gradient(45deg, #ff9a9e 0%, #fad0c4 99%, #fad0c4 100%);
            border: none; padding: 15px 50px;
            font-size: 1.4rem; color: white; border-radius: 50px;
            cursor: pointer; font-family: inherit;
            box-shadow: 0 8px 15px rgba(255, 107, 107, 0.3);
            transition: transform 0.1s;
        }
        button.btn-start:active { transform: scale(0.95); }

        /* ==================== 
           åº†ç¥é¡µé¢æ ·å¼ 
           ==================== */
        #celebrationWrapper {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            display: none; opacity: 0;
            background: linear-gradient(135deg, #FFF5C3 0%, #9452A5 100%); /* æ¢¦å¹»ç´«é‡‘ */
            justify-content: center; align-items: center;
            z-index: 50; transition: opacity 2s;
        }
        
        #fireworksCanvas { position: absolute; top: 0; left: 0; z-index: 1; }

        .celebrate-content {
            position: relative; z-index: 10;
            text-align: center; color: #fff;
            animation: zoomIn 1s ease forwards;
        }

        h1.big-title {
            font-size: 3.5rem; margin: 10px 0;
            text-shadow: 0 4px 0 #9452A5, 0 10px 20px rgba(0,0,0,0.2);
        }
        
        .badge-23 {
            display: inline-block;
            background: #ff6b6b; color: white;
            font-size: 1.5rem; padding: 5px 20px;
            border-radius: 50px; transform: rotate(-5deg);
            box-shadow: 4px 4px 0 rgba(0,0,0,0.1);
            margin-bottom: 20px;
        }

        /* çº¯CSSç« é±¼å¤ç”¨ */
        .octopus-container { position: relative; width: 150px; height: 180px; margin: 0 auto; animation: dance 2s infinite ease-in-out; }
        .oct-head { 
            width: 140px; height: 130px; background: #ff9aa2; border-radius: 50% 50% 45% 45%; 
            position: relative; box-shadow: inset -5px -10px 20px rgba(0,0,0,0.1);
        }
        .oct-eye { position: absolute; top: 50px; width: 30px; height: 38px; background: #333; border-radius: 50%; fill: white; }
        .oct-eye::after { content:''; position:absolute; top:8px; left:8px; width:12px; height:12px; background:#fff; border-radius:50%; }
        .oct-eye.l { left: 30px; } .oct-eye.r { right: 30px; }
        .oct-mouth { 
            position: absolute; bottom: 25px; left: 50%; transform: translate(-50%); 
            width: 20px; height: 10px; border-bottom: 4px solid #d63384; border-radius: 0 0 50% 50%;
        }
        .oct-tentacles { position: absolute; bottom: -20px; left: 10px; display: flex; gap: 10px; }
        .tentacle { width: 22px; height: 40px; background: #ff9aa2; border-radius: 0 0 20px 20px; }

        /* èƒœåˆ©æ—¶çš„çš‡å† å¸½ */
        .crown {
            position: absolute; top: -60px; left: 20px;
            font-size: 80px; transform: rotate(-15deg);
            filter: drop-shadow(0 5px 10px rgba(0,0,0,0.2));
            animation: floatHat 2s infinite ease-in-out;
        }

        @keyframes floatUI { 0%,100%{transform:translateY(0)} 50%{transform:translateY(-10px)} }
        @keyframes dance { 0%,100%{transform:rotate(-3deg) scale(1)} 50%{transform:rotate(3deg) scale(1.05)} }
        @keyframes zoomIn { from{transform:scale(0);opacity:0} to{transform:scale(1);opacity:1} }
        @keyframes floatHat { 0%,100%{transform:rotate(-15deg) translateY(0)} 50%{transform:rotate(-15deg) translateY(-10px)} }

    </style>
</head>
<body>

    <!-- æ¸¸æˆåŒºåŸŸ -->
    <div id="gameWrapper">
        <canvas id="gameCanvas"></canvas>
        
        <!-- æŠ¬å¤´æ˜¾ç¤º (HUD) -->
        <div class="hud" id="hud">
            <div class="count-badge">
                <span class="hat-icon">ğŸ‘‘</span>
                <span class="score-text" id="scoreEl">0</span>
                <span class="target-text">/ 23</span>
            </div>
            <div class="progress-bar">
                <div class="progress-fill" id="progressFill"></div>
            </div>
        </div>

        <!-- è¦†ç›–å±‚ï¼šå¼€å§‹/æš‚åœ/æç¤º -->
        <div class="ui-overlay" id="uiLayer">
            <div class="start-card" id="startScreen">
                <h2>ğŸ™ 23å²çš„æ·±æµ·å¯»å®</h2>
                <p>ä»Šå¤©æ˜¯å°ç« é±¼çš„23å²ç”Ÿæ—¥<br>ä½†åº†ç¥ç”¨çš„å¸½å­æ•£è½åœ¨æµ·é‡Œäº†<br>å¿«æ”¶é›† <b>23</b> ä¸ªå¸½å­æ¥å¼€å¯æ´¾å¯¹ï¼</p>
                <div style="font-size:0.9rem; color:#999; margin-bottom:15px;">(æŒ‰ä½å±å¹•ä¸Šæµ®ï¼Œå®‰å…¨æ— ç—›æ¨¡å¼)</div>
                <button class="btn-start" onclick="startGame()">å¼€å§‹æ”¶é›†</button>
            </div>
        </div>
    </div>

    <!-- åº†ç¥åŒºåŸŸ -->
    <div id="celebrationWrapper">
        <canvas id="fireworksCanvas"></canvas>
        <div class="celebrate-content">
            <div class="octopus-container">
                <div class="crown">ğŸ‘‘</div>
                <div class="oct-head">
                    <div class="oct-eye l"></div>
                    <div class="oct-eye r"></div>
                    <div class="oct-mouth"></div>
                    <div class="oct-tentacles">
                        <div class="tentacle"></div><div class="tentacle"></div>
                        <div class="tentacle"></div><div class="tentacle"></div>
                    </div>
                </div>
            </div>
            
            <div class="badge-23">âœ¨ Happy 23rd âœ¨</div>
            <h1 class="big-title">ç¥å°ç« é±¼<br>ç”Ÿæ—¥å¿«ä¹ï¼</h1>
            <p style="color:#fff; opacity:0.9; margin-top:10px;">æ„¿23å²çš„ä½ ï¼Œå¦‚åœ¨æµ·ä¸­è‡ªåœ¨é¨æ¸¸ï¼Œ<br>æ‰€é‡çš†æ˜¯æƒŠå–œï¼</p>
        </div>
    </div>

    <script>
        /**************************************
         * æ¸¸æˆæ ¸å¿ƒä»£ç 
         **************************************/
        const canvas = document.getElementById('gameCanvas');
        const ctx = canvas.getContext('2d');
        const scoreEl = document.getElementById('scoreEl');
        const progressFill = document.getElementById('progressFill');
        const startScreen = document.getElementById('startScreen');
        const uiLayer = document.getElementById('uiLayer');
        const hud = document.getElementById('hud');
        
        let width, height;
        const TARGET_SCORE = 23; 
        
        // æ¸¸æˆçŠ¶æ€
        let state = {
            playing: false,
            score: 0,
            frames: 0,
            speed: 3,
            finished: false
        };

        // é€‚é…å±å¹•
        function resize() {
            width = canvas.width = window.innerWidth;
            height = canvas.height = window.innerHeight;
        }
        window.addEventListener('resize', resize);
        resize();

        // è¾“å…¥æ§åˆ¶
        let inputActive = false;
        const setInput = (val) => { if(state.playing && !state.finished) inputActive = val; };
        
        window.addEventListener('mousedown', () => setInput(true));
        window.addEventListener('mouseup', () => setInput(false));
        window.addEventListener('touchstart', (e) => { e.preventDefault(); setInput(true); }, {passive:false});
        window.addEventListener('touchend', (e) => { e.preventDefault(); setInput(false); });
        window.addEventListener('keydown', (e) => { if(e.code==='Space') setInput(true); });
        window.addEventListener('keyup', (e) => { if(e.code==='Space') setInput(false); });

        // --- æ¸¸æˆå®ä½“ ---

        // ä¸»è§’ï¼šå°ç« é±¼
        const player = {
            x: 50, y: height/2, r: 20, vy: 0,
            draw() {
                // åˆ¤æ–­æ˜¯å¦å—åˆ°ä¼¤å®³ï¼ˆæ— æ•Œé—ªçƒï¼‰
                if(this.hurtTimer > 0) {
                    this.hurtTimer--;
                    if(Math.floor(Date.now()/50) % 2 === 0) return; // é—ªçƒæ•ˆæœ
                }

                ctx.save();
                ctx.translate(this.x, this.y);
                // å€¾æ–œæ¨¡æ‹Ÿæ¸¸æ³³
                let angle = inputActive ? -0.2 : 0.1;
                ctx.rotate(angle);

                // èº«ä½“
                ctx.fillStyle = '#ff9aa2';
                ctx.beginPath(); ctx.arc(0, 0, this.r, 0, Math.PI*2); ctx.fill();
                
                // è§¦æ‰‹ (ç®€å•çš„åŠ¨æ€)
                ctx.fillStyle = '#ff9aa2';
                let legOffset = Math.sin(state.frames * 0.2) * 3;
                ctx.beginPath(); ctx.arc(-10, 15+legOffset, 6, 0, Math.PI*2); ctx.fill();
                ctx.beginPath(); ctx.arc(0, 18-legOffset, 6, 0, Math.PI*2); ctx.fill();
                ctx.beginPath(); ctx.arc(10, 15+legOffset, 6, 0, Math.PI*2); ctx.fill();

                // è„¸
                ctx.fillStyle = '#fff';
                ctx.beginPath(); ctx.arc(6, -5, 6, 0, Math.PI*2); ctx.fill(); //çœ¼ç™½
                ctx.fillStyle = '#333';
                ctx.beginPath(); ctx.arc(8, -5, 2, 0, Math.PI*2); ctx.fill(); //çœ¼ç 
                
                // è…®çº¢
                ctx.fillStyle = 'rgba(255,0,0,0.2)';
                ctx.beginPath(); ctx.arc(0, 5, 4, 0, Math.PI*2); ctx.fill();

                ctx.restore();
            },
            update() {
                // ç‰©ç†
                if (inputActive) this.vy -= 0.4; // ä¸Šæµ®åŠ›
                else this.vy += 0.2; // ä¸‹æ²‰é‡åŠ› (å¾ˆè½»)

                // é˜»åŠ›
                this.vy *= 0.95;
                this.y += this.vy;

                // è¾¹ç•Œé™åˆ¶ (ä¸”æœ‰å¼¹æ€§)
                if (this.y < this.r) { this.y = this.r; this.vy = 0; }
                if (this.y > height - this.r) { this.y = height - this.r; this.vy = 0; }
            },
            hurtTimer: 0,
            hurt() {
                this.hurtTimer = 30; // åŠç§’æ— æ•Œ
                // ç»™ä¸€ä¸ªåæ–¹å‘çš„åŠ›
                this.vy = -2;
            }
        };

        // æ”¶é›†ç‰©ï¼šå¸½å­
        class Hat {
            constructor() {
                this.r = 15;
                this.x = width + 50;
                // éšæœºé«˜åº¦ï¼Œä½†ä¸è¦å¤ªè´´è¾¹
                this.y = Math.random() * (height - 100) + 50;
                this.collected = false;
                // æœ‰äº›å¸½å­ä¼šä¸Šä¸‹æµ®åŠ¨
                this.floatOffset = Math.random() * 100;
            }
            update() {
                this.x -= state.speed;
                this.y += Math.sin((state.frames + this.floatOffset) * 0.05) * 0.5;
            }
            draw() {
                if (this.collected) return;
                ctx.save();
                ctx.translate(this.x, this.y);
                // é‡‘è‰²å°å¸½å­
                ctx.fillStyle = '#ffd700'; 
                ctx.beginPath(); ctx.moveTo(0, -15); ctx.lineTo(12, 10); ctx.lineTo(-12, 10); ctx.fill();
                // è£…é¥°
                ctx.beginPath(); ctx.arc(0,-15,3,0,Math.PI*2); ctx.fillStyle='#fff'; ctx.fill();
                ctx.restore();
            }
        }

        // éšœç¢ç‰©ï¼šæ°”æ³¡/æ°´æ¯ (å‹å¥½çš„éšœç¢)
        class Obstacle {
            constructor() {
                this.r = 25;
                this.x = width + 50;
                this.y = Math.random() * height;
            }
            update() {
                this.x -= state.speed * 0.8; // é£˜å¾—æ¯”å¸½å­æ…¢ä¸€ç‚¹
            }
            draw() {
                ctx.save();
                ctx.translate(this.x, this.y);
                ctx.globalAlpha = 0.6;
                ctx.fillStyle = '#a29bfe';
                // ç”»ä¸ªç®€å•çš„æ°´æ¯å½¢çŠ¶
                ctx.beginPath(); ctx.arc(0, -5, 20, Math.PI, 0); ctx.fill();
                ctx.fillRect(-20, -5, 40, 5);
                // è„š
                ctx.strokeStyle = '#a29bfe'; ctx.lineWidth = 2;
                for(let i=-15; i<=15; i+=10) {
                    ctx.beginPath(); ctx.moveTo(i, 0); 
                    ctx.lineTo(i + Math.sin(state.frames*0.2)*5, 15); 
                    ctx.stroke();
                }
                ctx.restore();
            }
        }

        // ç²’å­ç‰¹æ•ˆ (åƒåˆ°ä¸œè¥¿æ—¶)
        let particles = [];
        function spawnParticles(x, y) {
            for(let i=0; i<8; i++) {
                particles.push({
                    x: x, y: y,
                    vx: (Math.random()-0.5)*5, vy: (Math.random()-0.5)*5,
                    life: 1.0, color: `hsl(${Math.random()*360}, 100%, 70%)`
                });
            }
        }

        // æµ®åŠ¨æ–‡å­— (+1)
        let popTexts = [];
        function spawnText(x, y) {
            popTexts.push({x:x, y:y, alpha:1, dy:0});
        }

        // å®ä½“ç®¡ç†å™¨
        let hats = [];
        let obstacles = [];

        function resetGame() {
            state.score = 0;
            state.playing = true;
            state.finished = false;
            state.frames = 0;
            player.y = height/2; player.vy = 0;
            hats = [];
            obstacles = [];
            particles = [];
            popTexts = [];
            updateUI();
        }

        function startGame() {
            startScreen.style.display = 'none';
            resetGame();
            loop();
        }

        function updateUI() {
            scoreEl.innerText = state.score;
            let percent = (state.score / TARGET_SCORE) * 100;
            progressFill.style.width = percent + '%';
        }

        function win() {
            state.finished = true;
            state.playing = false;
            
            // ç®€å•çš„è½¬åœºåŠ¨ç”»
            const wrapper = document.getElementById('gameWrapper');
            const cel = document.getElementById('celebrationWrapper');
            
            wrapper.style.transform = 'translateY(-100vh)';
            setTimeout(() => {
                wrapper.style.display = 'none';
                cel.style.display = 'flex';
                // å¼ºåˆ¶é‡æµ
                void cel.offsetWidth; 
                cel.style.opacity = '1';
                startFireworks();
            }, 800);
        }

        // --- ä¸»å¾ªç¯ ---
        function loop() {
            if (!state.playing) return;

            // 1. æ¸…ç†ä¸èƒŒæ™¯
            ctx.clearRect(0, 0, width, height);
            
            // ç”»ä¸€äº›èƒŒæ™¯æ°”æ³¡
            ctx.fillStyle = 'rgba(255,255,255,0.15)';
            for(let i=0; i<5; i++) {
                let bx = (state.frames * (2+i) + i*100) % width;
                let by = (height - (state.frames + i*50) % height);
                ctx.beginPath(); ctx.arc(bx, by, 5+i*2, 0, Math.PI*2); ctx.fill();
            }

            state.frames++;
            player.update();
            player.draw();

            // 2. ç”Ÿæˆé€»è¾‘
            // å¸½å­ç”Ÿæˆï¼šæ¯”è¾ƒé¢‘ç¹ï¼Œç¡®ä¿å®¹æ˜“æ”¶é›†
            if (state.frames % 50 === 0) {
                hats.push(new Hat());
            }
            // éšœç¢ç”Ÿæˆï¼šæ¯”è¾ƒç¨€ç–
            if (state.frames > 200 && state.frames % 120 === 0) {
                obstacles.push(new Obstacle());
            }

            // 3. æ›´æ–°å¸½å­
            for (let i = hats.length - 1; i >= 0; i--) {
                let h = hats[i];
                h.update();
                h.draw();

                // ç¢°æ’åˆ¤å®š (ç®€å•çš„åœ†åœ†ç¢°æ’)
                let dx = h.x - player.x;
                let dy = h.y - player.y;
                let dist = Math.sqrt(dx*dx + dy*dy);
                
                if (!h.collected && dist < (player.r + h.r)) {
                    // åƒåˆ°å¸½å­ï¼
                    h.collected = true;
                    state.score++;
                    updateUI();
                    spawnParticles(h.x, h.y);
                    spawnText(h.x, h.y);
                    
                    if(state.score >= TARGET_SCORE) {
                        win();
                    }
                }

                // ç§»é™¤å‡ºå±å¹•çš„
                if (h.x < -50) hats.splice(i, 1);
            }

            // 4. æ›´æ–°éšœç¢
            for (let i = obstacles.length - 1; i >= 0; i--) {
                let o = obstacles[i];
                o.update();
                o.draw();

                // ç¢°æ’
                let dx = o.x - player.x;
                let dy = o.y - player.y;
                let dist = Math.sqrt(dx*dx + dy*dy);
                
                if (dist < (player.r + o.r)) {
                    if(player.hurtTimer === 0) {
                        // æ’åˆ°äº†ï¼Œå¼¹å¼€ï¼Œä½†ä¸æ­»
                        player.hurt();
                        // ç¨å¾®å‡æ…¢ä¸€ç‚¹ç‚¹å¸½å­å‡ºç°é€Ÿåº¦æˆ–å±å¹•æŠ–åŠ¨ï¼ˆè¿™é‡Œç®€åŒ–ä¸ºå¼¹å¼€ï¼‰
                        ctx.fillStyle = 'rgba(255,255,255,0.5)';
                        ctx.fillRect(0,0,width,height); // é—ªç™½
                    }
                }

                if (o.x < -50) obstacles.splice(i, 1);
            }

            // 5. ç‰¹æ•ˆç»˜åˆ¶
            // ç²’å­
            for (let i=particles.length-1; i>=0; i--) {
                let p = particles[i];
                p.x += p.vx; p.y += p.vy; p.life -= 0.05;
                if(p.life <=0) { particles.splice(i,1); continue; }
                ctx.fillStyle = p.color;
                ctx.globalAlpha = p.life;
                ctx.beginPath(); ctx.arc(p.x, p.y, 3, 0, Math.PI*2); ctx.fill();
            }
            // æ–‡å­—
            for (let i=popTexts.length-1; i>=0; i--) {
                let t = popTexts[i];
                t.dy -= 1; 
                t.alpha -= 0.02;
                if(t.alpha <=0) { popTexts.splice(i,1); continue; }
                ctx.fillStyle = `rgba(255, 255, 255, ${t.alpha})`;
                ctx.font = 'bold 20px "ZCOOL KuaiLe"';
                ctx.fillText("+1", t.x, t.y + t.dy);
            }
            ctx.globalAlpha = 1;

            requestAnimationFrame(loop);
        }

        
        /**************************************
         * çƒŸèŠ±é€»è¾‘ (Celebrating)
         **************************************/
        function startFireworks() {
            const fCanvas = document.getElementById('fireworksCanvas');
            const fCtx = fCanvas.getContext('2d');
            fCanvas.width = window.innerWidth;
            fCanvas.height = window.innerHeight;
            
            let fireworks = [];

            class FireworkParticle {
                constructor(x, y, color) {
                    this.x = x; this.y = y; this.color = color;
                    let angle = Math.random() * Math.PI * 2;
                    let speed = Math.random() * 4 + 2;
                    this.vx = Math.cos(angle) * speed;
                    this.vy = Math.sin(angle) * speed;
                    this.life = 1; this.decay = Math.random() * 0.02 + 0.01;
                }
                update() {
                    this.x += this.vx; this.y += this.vy;
                    this.vy += 0.05; // gravity
                    this.vx *= 0.95; this.vy *= 0.95;
                    this.life -= this.decay;
                }
                draw() {
                    fCtx.fillStyle = this.color;
                    fCtx.globalAlpha = this.life;
                    fCtx.beginPath(); fCtx.arc(this.x, this.y, 3, 0, Math.PI*2); fCtx.fill();
                }
            }

            function bang(x, y) {
                const colors = ['#f1c40f', '#e74c3c', '#8e44ad', '#3498db', '#2ecc71'];
                const c = colors[Math.floor(Math.random()*colors.length)];
                for(let i=0; i<40; i++) fireworks.push(new FireworkParticle(x, y, c));
            }

            // è‡ªåŠ¨æ”¾çƒŸèŠ±
            setInterval(() => {
                bang(Math.random()*fCanvas.width, Math.random()*fCanvas.height/2 + 50);
            }, 800);

            function fLoop() {
                fCtx.clearRect(0,0,fCanvas.width, fCanvas.height);
                for(let i=fireworks.length-1; i>=0; i--) {
                    fireworks[i].update();
                    fireworks[i].draw();
                    if(fireworks[i].life <= 0) fireworks.splice(i,1);
                }
                requestAnimationFrame(fLoop);
            }
            fLoop();
        }

    </script>
</body>
</html>
